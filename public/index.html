<!-- public/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Varcavia Search MVP</title>
</head>
<body>
  <h1>🔍 Varcavia Universal Data Search</h1>
  <form id="f">
    <label>Testo: <input type="text" id="q"></label>
    <label>Fonte:
      <select id="source">
        <option value="all">Tutte</option>
        <!-- Popola dinamicamente o staticamente con option value="eba">EBA</option>, ecc. -->
      </select>
    </label>
    <button type="submit">Cerca</button>
  </form>
  <div id="results"></div>

  <script>
    document.getElementById('f').onsubmit = async e => {
      e.preventDefault();
      const q = document.getElementById('q').value;
      const source = document.getElementById('source').value;
      const res = await fetch(`/api/search?q=${encodeURIComponent(q)}&source=${encodeURIComponent(source)}`);
      const data = await res.json();
      const container = document.getElementById('results');
      container.innerHTML = data.length 
        ? data.map(d => `
            <div style="border:1px solid #ccc;margin:10px;padding:10px;">
              <strong>${d.title || d.id}</strong><br>
              Fonte: ${d.source} — Preview: ${d.preview}
            </div>
          `).join('')
        : '<p>Nessun risultato</p>';
    };
  </script>
</body>
</html>
